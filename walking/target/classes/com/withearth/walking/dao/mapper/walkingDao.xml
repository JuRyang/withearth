<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.withearth.walking.dao.WalkingDao">

	<!-- Course Type의 resultMap -->
	<resultMap id="courseResult" type="com.withearth.walking.domain.Course"  >
		<id column="course_idx" property="course_idx"/>
		<result column="course_date" property="course_date"/>
		<result column="loc_km" property="loc_km"/>
		<result column="walking_time" property="walking_time"/>
		<result column="start_point" property="start_point"/>
		<result column="end_point" property="end_point"/>
	</resultMap>

	<!-- 코스 리스트 -->
	<resultMap id="courseListResult" type="com.withearth.walking.domain.Course" >
		<id column="course_idx" property="course_idx"/>
		<result column="course_date" property="course_date"/>
		<result column="loc_km" property="loc_km"/>
		<result column="walking_time" property="walking_time"/>
		<result column="start_point" property="start_point"/>
		<result column="end_point" property="end_point"/>
	</resultMap>
	
	
	<!-- 나의 코스 저장 -->
	<insert id="insertCourse"
			parameterType="com.withearth.walking.domain.Course"
			useGeneratedKeys="true"
			keyProperty="course_idx">
		
		insert into course( loc_km, walking_time, start_point, end_point) values(#{loc_km}, #{walking_time}, #{start_point}, #{end_point} )	
	
	</insert>
	
	<!-- course_count update -->
	<!-- <update id="courseCountUpdate">
		update course_count set coursecount = coursecount+1 
	</update> -->
	
	<!--  -->
	<select id="selectCourseList" parameterType="map" resultMap="courseListResult">
		select * from course
	</select>

	<!-- 코스의 총 개수-->
	<select id="selectTotalCount" resultType="int">
		select count(*) from course
	</select>

	<!-- 코스 삭제 -->
	<delete id="deleteCourseByIdx">
		delete from course where course_idx=#{course_idx}
	</delete>
	
</mapper>
