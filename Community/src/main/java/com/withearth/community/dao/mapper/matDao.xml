<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.withearth.community.matdao.MatDao">
	
	<!-- 맛집리스트 출력 -->
	<resultMap id="matResult" type="com.withearth.community.domain.MatzipVo">
		<id column="mat_idx" property="matIdx" />
		<result column="mat_title" property="matTitle" />
		<result column="mat_addr" property="matAddr" />
		<result column="mat_time" property="matTime" />
		<result column="mat_wr" property="matWr" />
		<result column="mat_cont" property="matCont" />
		<result column="mat_img" property="matImg" />
		<result column="mat_date" property="matDate" />
		<result column="mat_heart" property="matHeart" />
		<result column="idx" property="idx" />
	</resultMap>

	<!-- 맛집리스트 출력 -->
	<resultMap id="matListResult" type="com.withearth.community.domain.MatzipVo">
		<id column="mat_idx" property="matIdx" />
		<result column="mat_title" property="matTitle" />
		<result column="mat_addr" property="matAddr" />
		<result column="mat_time" property="matTime" />
		<result column="mat_wr" property="matWr" />
		<result column="mat_cont" property="matCont" />
		<result column="mat_img" property="matImg" />
		<result column="mat_date" property="matDate" />
		<result column="mat_heart" property="matHeart" />
		<result column="idx" property="idx" />
	</resultMap>
	
	<select id="selectAllMatList"
					parameterType="map"
					resultMap="matListResult">

		select * from Matzip

	</select>
	
	<!-- 파일 첨부 -->
	<insert id="insertMatzip"
	parameterType="com.withearth.community.domain.MatzipVo"
	useGeneratedKeys="true"
	keyProperty="matIdx"
	>
	
	INSERT INTO Matzip
	
	<if test="matImg == null">
	(mat_title, mat_addr, mat_time, mat_cont)
	VALUES
	(#{matTitle},#{matAddr},#{matTime},#{matCont})
	</if>
	
	<if test="matImg != null">
	(mat_title, mat_addr, mat_time, mat_cont, mat_img)
	VALUES
	(#{matTitle},#{matAddr},#{matTime},#{matCont},#{matImg})
	</if>
	</insert>
	
	<insert id=""></insert>
	
	


</mapper>