<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.aia.dona.dao.CouponDao">
 
   <resultMap type="com.aia.dona.domain.Coupon" id="couponResult">
    <result column="coupon_idx" property="couponIdx"/>
    <result column="coupon_qr" property="couponQr"/>
    <result column="coupon_history" property="couponHistory"/>
    <result column="history_date" property="historyDate"/>
    <result column="minus_point" property="minusPoint"/>
    <result column="idx" property="idx"/>
   </resultMap> 
  
  <select id="selectCouponList"
          resultMap="couponResult">
    select * from coupon where idx=#{idx}
  </select>
  
  <insert id="insertCoupon"
          parameterType="com.aia.dona.domain.Coupon"
          useGeneratedKeys="true"
          keyProperty="couponIdx">
   insert into coupon(coupon_idx, coupon_qr, coupon_history, minus_point, idx)
   values(#{couponIdx}, #{couponQr}, #{couponHistory}, #{minusPoint}, #{idx})
  </insert>
  
  <delete id="deleteCoupon"
          parameterType="com.aia.dona.domain.Coupon">
    delete from coupon where idx=#{param1} and coupon_idx=#{param2}
  </delete>
 
 
 </mapper>